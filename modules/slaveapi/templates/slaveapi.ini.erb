# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

[server]
listen = <%=@listenaddr%>
port = <%=@port%>
concurrency = 16
daemonize = true
pidfile = <%=@basedir%>/slaveapi.pid

[secrets]
credentials_file = <%=@credentials_file%>

[aws]
aws_base_path = <%=@basedir%>/aws
cloud_tools_path  = <%=@basedir%>/aws/cloud-tools
aws_secrets = <%=@basedir%>/aws/secrets/aws-secrets.json
aws_ssh_key = <%= scope.lookupvar("::users::builder::home") %>/.ssh/aws-ssh-key

[slavealloc]
api_url = <%= scope.lookupvar("::config::slaveapi_slavealloc_url") %>

[inventory]
api_url = <%= scope.lookupvar("::config::slaveapi_inventory_url") %>
username = <%= scope.lookupvar("::config::slaveapi_inventory_username") %>

[buildapi]
api_url = <%= scope.lookupvar("::config::slaveapi_buildapi_url") %>
max_concurrent = 15

[bugzilla]
api_url = <%=@bugzilla_url%>
username = <%= scope.lookupvar("::config::slaveapi_bugzilla_username") %>

[devices]
devices_json_url = http://hg.mozilla.org/build/tools/raw-file/default/buildfarm/mobile/devices.json

[slaves]
default_domain = <%= scope.lookupvar("::config::slaveapi_default_domain") %>
ipmi_username = <%= scope.lookupvar("::config::slaveapi_ipmi_username") %>

[logging]
level = INFO
file = <%=@basedir%>/slaveapi.log
maxsize = 10485760 ; 10MB
maxfiles = 50
